<!-- <%- include("../partials/head.ejs") %>
<%- include("../partials/header.ejs") %>

<main>
  <h2>Medications Checklist</h2>

  <ul>
    <% meds.forEach(med => { %>
      <li <%= med.taken ? 'style="text-decoration: line-through;"' : '' %>>
        <strong><%= med.name %></strong> 
        - <%= med.dosage %>mg 
        - <%= med.date ? new Date(med.date).toDateString() : "No date" %>

        Notes (Array) -->
        <!-- <% if (med.notes && med.notes.length > 0) { %>
          <ul>
            <% med.notes.forEach(note => { %>
              <li><%= note %></li>
            <% }); %>
          </ul>
        <% } %> -->

        <!-- Mark as Taken/Undo -->
        <!-- <form action="/medications/<%= med._id %>/toggle" method="POST" style="display:inline;">
          <button type="submit"><%= med.taken ? "Undo" : "Mark as Taken" %></button>
        </form> -->

        <!-- Edit -->
        <!-- <a href="/medications/<%= med._id %>/edit">Edit</a> -->

        <!-- Delete -->
        <!-- <form action="/medications/<%= med._id %>?_method=DELETE" method="POST" style="display:inline;">
          <button type="submit">Delete</button>
        </form>
      </li>
    <% }); %>
  </ul>
</main>

<%- include("../partials/footer.ejs") %> -->

<%- include("../partials/head") %>
<%- include("../partials/header") %>

<main>
  <h2>Medications List</h2>
  <a href="/medications/new">Add New Medication</a>

  <% if (meds.length === 0) { %>
    <p>No medications found.</p>
  <% } else { %>
    <ul>
      <% meds.forEach(med => { %>
        <li>
          <a href="/medications/<%= med._id %>"><%= med.name %></a>
          - <%= med.dosage %> mg
          - <%= med.date ? new Date(med.date).toDateString() : 'No date' %>
          | <a href="/medications/<%= med._id %>/edit">Edit</a>
          | 
          <form action="/medications/<%= med._id %>/delete" method="POST" style="display:inline;">
            <button type="submit" onclick="return confirm('Delete this medication?')">Delete</button>
          </form>
        </li>
      <% }) %>
    </ul>
  <% } %>
</main>